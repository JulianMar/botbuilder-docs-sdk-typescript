### YamlMime:TSType
name: CoreBotAdapter
uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter
package: botbuilder-dialogs-adaptive-runtime
summary: ''
fullName: CoreBotAdapter
remarks: ''
isPreview: false
isDeprecated: false
type: class
constructors:
  - name: >-
      CoreBotAdapter(Partial<BotFrameworkAdapterSettings>, ConversationState,
      UserState)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.constructor
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        new CoreBotAdapter(settings: Partial<BotFrameworkAdapterSettings>,
        conversationState: ConversationState, userState: UserState)
      parameters:
        - id: settings
          type: Partial&lt;BotFrameworkAdapterSettings&gt;
          description: ''
        - id: conversationState
          type: ConversationState
          description: ''
        - id: userState
          type: UserState
          description: ''
properties:
  - name: BotIdentityKey
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.BotIdentityKey
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: BotIdentityKey
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'BotIdentityKey: symbol'
      return:
        type: symbol
        description: ''
  - name: ConnectorClientKey
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.ConnectorClientKey
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: ConnectorClientKey
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'ConnectorClientKey: symbol'
      return:
        type: symbol
        description: ''
  - name: isStreamingConnectionOpen
    uid: >-
      botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.isStreamingConnectionOpen
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: isStreamingConnectionOpen
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'isStreamingConnectionOpen: boolean'
      return:
        type: boolean
        description: ''
  - name: OAuthScopeKey
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.OAuthScopeKey
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: OAuthScopeKey
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'OAuthScopeKey: symbol'
      return:
        type: symbol
        description: ''
  - name: onTurnError
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.onTurnError
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: onTurnError
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'onTurnError: (context: TurnContext, error: Error) => Promise<void>'
      return:
        type: '(context: TurnContext, error: Error) =&gt; Promise&lt;void&gt;'
        description: ''
  - name: TokenApiClientCredentialsKey
    uid: >-
      botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.TokenApiClientCredentialsKey
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    fullName: TokenApiClientCredentialsKey
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'TokenApiClientCredentialsKey: symbol'
      return:
        type: symbol
        description: ''
methods:
  - name: >-
      continueConversation(Partial<ConversationReference>, (context:
      TurnContext) => Promise<void>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.continueConversation
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously resumes a conversation with a user, possibly after some
      time has gone by.
    remarks: >-
      This is often referred to as a _proactive notification_, the bot can
      proactively

      send a message to a conversation or user without waiting for an incoming
      message.

      For example, a bot can use this method to send notifications or coupons to
      a user.


      To send a proactive message:

      1. Save a copy of a
      [ConversationReference](xref:botframework-schema.ConversationReference)
         from an incoming activity. For example, you can store the conversation reference in a database.
      1. Call this method to resume the conversation at a later time. Use the
      saved reference to access the conversation.

      1. On success, the adapter generates a
      [TurnContext](xref:botbuilder-core.TurnContext) object and calls the
      `logic` function handler.
         Use the `logic` function to send the proactive message.

      To copy the reference from any incoming activity in the conversation, use
      the

      [TurnContext.getConversationReference](xref:botbuilder-core.TurnContext.getConversationReference)
      method.


      This method is similar to the
      [processActivity](xref:botbuilder.BotFrameworkAdapter.processActivity)
      method.

      The adapter creates a [TurnContext](xref:botbuilder-core.TurnContext) and
      routes it through

      its middleware before calling the `logic` handler. The created activity
      will have a

      [type](xref:botframework-schema.Activity.type) of 'event' and a

      [name](xref:botframework-schema.Activity.name) of 'continueConversation'.


      For example:

      ```JavaScript

      server.post('/api/notifyUser', async (req, res) => {
         // Lookup previously saved conversation reference.
         const reference = await findReference(req.body.refId);

         // Proactively notify the user.
         if (reference) {
            await adapter.continueConversation(reference, async (context) => {
               await context.sendActivity(req.body.message);
            });
            res.send(200);
         } else {
            res.send(404);
         }
      });

      ```
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function continueConversation(reference: Partial<ConversationReference>,
        logic: (context: TurnContext) => Promise<void>)
      parameters:
        - id: reference
          type: Partial&lt;ConversationReference&gt;
          description: A reference to the conversation to continue.
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;void&gt;'
          description: |
            The asynchronous method to call after the adapter middleware runs.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: >-
      continueConversation(Partial<ConversationReference>, string, (context:
      TurnContext) => Promise<void>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.continueConversation_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function continueConversation(reference: Partial<ConversationReference>,
        oAuthScope: string, logic: (context: TurnContext) => Promise<void>)
      parameters:
        - id: reference
          type: Partial&lt;ConversationReference&gt;
          description: ''
        - id: oAuthScope
          type: string
          description: ''
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;void&gt;'
          description: ''
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: createConnectorClient(string)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.createConnectorClient
    package: botbuilder-dialogs-adaptive-runtime
    summary: Creates a connector client.
    remarks: >-
      Override this in a derived class to create a mock connector client for
      unit testing.
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'function createConnectorClient(serviceUrl: string)'
      parameters:
        - id: serviceUrl
          type: string
          description: |
            The client's service URL.
      return:
        type: ConnectorClient
        description: ''
  - name: 'createConnectorClientWithIdentity(string, ClaimsIdentity)'
    uid: >-
      botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.createConnectorClientWithIdentity
    package: botbuilder-dialogs-adaptive-runtime
    summary: Create a ConnectorClient with a ClaimsIdentity.
    remarks: >-
      If the ClaimsIdentity contains the claims for a Skills request, create a
      ConnectorClient for use with Skills.

      Derives the correct audience from the ClaimsIdentity, or the instance's
      credentials property.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function createConnectorClientWithIdentity(serviceUrl: string, identity:
        ClaimsIdentity)
      parameters:
        - id: serviceUrl
          type: string
          description: The client's service URL.
        - id: identity
          type: ClaimsIdentity
          description: |
            ClaimsIdentity
      return:
        type: Promise&lt;ConnectorClient&gt;
        description: ''
  - name: 'createConnectorClientWithIdentity(string, ClaimsIdentity, string)'
    uid: >-
      botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.createConnectorClientWithIdentity_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: Create a ConnectorClient with a ClaimsIdentity and an explicit audience.
    remarks: >-
      If the trimmed audience is not a non-zero length string, the audience will
      be derived from the ClaimsIdentity or

      the instance's credentials property.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function createConnectorClientWithIdentity(serviceUrl: string, identity:
        ClaimsIdentity, audience: string)
      parameters:
        - id: serviceUrl
          type: string
          description: The client's service URL.
        - id: identity
          type: ClaimsIdentity
          description: ClaimsIdentity
        - id: audience
          type: string
          description: >
            The recipient of the ConnectorClient's messages. Normally the Bot
            Framework Channel Service or the AppId of another bot.
      return:
        type: Promise&lt;ConnectorClient&gt;
        description: ''
  - name: >-
      createConversation(Partial<ConversationReference>, (context: TurnContext)
      => Promise<void>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.createConversation
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously creates and starts a conversation with a user on a channel.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function createConversation(reference: Partial<ConversationReference>,
        logic: (context: TurnContext) => Promise<void>)
      parameters:
        - id: reference
          type: Partial&lt;ConversationReference&gt;
          description: A reference for the conversation to create.
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;void&gt;'
          description: The asynchronous method to call after the adapter middleware runs.
      return:
        type: Promise&lt;void&gt;
        description: a promise representing the asynchronous operation
  - name: >-
      createConversation(Partial<ConversationReference>,
      Partial<ConversationParameters>, (context: TurnContext) => Promise<void>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.createConversation_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously creates and starts a conversation with a user on a channel.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function createConversation(reference: Partial<ConversationReference>,
        parameters: Partial<ConversationParameters>, logic: (context:
        TurnContext) => Promise<void>)
      parameters:
        - id: reference
          type: Partial&lt;ConversationReference&gt;
          description: A reference for the conversation to create.
        - id: parameters
          type: Partial&lt;ConversationParameters&gt;
          description: Parameters used when creating the conversation
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;void&gt;'
          description: The asynchronous method to call after the adapter middleware runs.
      return:
        type: Promise&lt;void&gt;
        description: a promise representing the asynchronous operation
  - name: 'deleteActivity(TurnContext, Partial<ConversationReference>)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.deleteActivity
    package: botbuilder-dialogs-adaptive-runtime
    summary: >
      Asynchronously deletes an existing activity.

      This interface supports the framework and is not intended to be called
      directly for your code.

      Use
      [TurnContext.deleteActivity](xref:botbuilder-core.TurnContext.deleteActivity)
      to delete

      an activity from your bot code.
    remarks: >-
      Not all channels support this operation. For channels that don't, this
      call may throw an exception.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function deleteActivity(context: TurnContext, reference:
        Partial<ConversationReference>)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: reference
          type: Partial&lt;ConversationReference&gt;
          description: |
            Conversation reference information for the activity to delete.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: 'deleteConversationMember(TurnContext, string)'
    uid: >-
      botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.deleteConversationMember
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously removes a member from the current conversation.
    remarks: >-
      Remove a member's identity information from the conversation.


      Not all channels support this operation. For channels that don't, this
      call may throw an exception.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function deleteConversationMember(context: TurnContext, memberId:
        string)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: memberId
          type: string
          description: |
            The ID of the member to remove from the conversation.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: 'emulateOAuthCards(TurnContext | string, boolean)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.emulateOAuthCards
    package: botbuilder-dialogs-adaptive-runtime
    summary: >
      Asynchronously sends an emulated OAuth card for a channel.

      This method supports the framework and is not intended to be called
      directly for your code.
    remarks: >-
      When testing a bot in the Bot Framework Emulator, this method can emulate
      the OAuth card interaction.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function emulateOAuthCards(contextOrServiceUrl: TurnContext | string,
        emulate: boolean)
      parameters:
        - id: contextOrServiceUrl
          type: TurnContext | string
          description: The URL of the emulator.
        - id: emulate
          type: boolean
          description: >
            `true` to send an emulated OAuth card to the emulator; or `false` to
            not send the card.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: >-
      exchangeToken(TurnContext, string, string, TokenExchangeRequest,
      CoreAppCredentials)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.exchangeToken
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously Performs a token exchange operation such as for single
      sign-on.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function exchangeToken(context: TurnContext, connectionName: string,
        userId: string, tokenExchangeRequest: TokenExchangeRequest,
        appCredentials?: CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: Context for the current turn of conversation with the user.
        - id: connectionName
          type: string
          description: Name of the auth connection to use.
        - id: userId
          type: string
          description: The user id that will be associated with the token.
        - id: tokenExchangeRequest
          type: TokenExchangeRequest
          description: >-
            The exchange request details, either a token to exchange or a uri to
            exchange.
        - id: appCredentials
          type: CoreAppCredentials
          description: |
            Optional. The CoreAppCredentials for OAuth.
      return:
        type: Promise&lt;TokenResponse&gt;
        description: ''
  - name: 'getAadTokens(TurnContext, string, string[])'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getAadTokens
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously signs out the user from the token server.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getAadTokens(context: TurnContext, connectionName: string,
        resourceUrls: string[])
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: connectionName
          type: string
          description: The name of the auth connection to use.
        - id: resourceUrls
          type: 'string[]'
          description: The list of resource URLs to retrieve tokens for.
      return:
        type: 'Promise&lt;[key: string]: TokenResponse&gt;'
        description: >-
          A map of the [TokenResponse](xref:botframework-schema.TokenResponse)
          objects by resource URL.
  - name: 'getAadTokens(TurnContext, string, string[], CoreAppCredentials)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getAadTokens_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getAadTokens(context: TurnContext, connectionName: string,
        resourceUrls: string[], oAuthAppCredentials?: CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: ''
        - id: connectionName
          type: string
          description: ''
        - id: resourceUrls
          type: 'string[]'
          description: ''
        - id: oAuthAppCredentials
          type: CoreAppCredentials
          description: ''
      return:
        type: 'Promise&lt;[key: string]: TokenResponse&gt;'
        description: ''
  - name: 'getActivityMembers(TurnContext, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getActivityMembers
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously lists the members of a given activity.
    remarks: >-
      Returns an array of
      [ChannelAccount](xref:botframework-schema.ChannelAccount) objects for

      the users involved in a given activity.


      This is different from
      [getConversationMembers](xref:botbuilder.BotFrameworkAdapter.getConversationMembers)

      in that it will return only those users directly involved in the activity,
      not all members of the conversation.
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'function getActivityMembers(context: TurnContext, activityId?: string)'
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: activityId
          type: string
          description: >
            Optional. The ID of the activity to get the members of. If not
            specified, the current activity ID is used.
      return:
        type: 'Promise&lt;ChannelAccount[]&gt;'
        description: >-
          An array of [ChannelAccount](xref:botframework-schema.ChannelAccount)
          objects for

          the users involved in a given activity.
  - name: getConversationMembers(TurnContext)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getConversationMembers
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously lists the members of the current conversation.
    remarks: >-
      Returns an array of
      [ChannelAccount](xref:botframework-schema.ChannelAccount) objects for

      all users currently involved in a conversation.


      This is different from
      [getActivityMembers](xref:botbuilder.BotFrameworkAdapter.getActivityMembers)

      in that it will return all members of the conversation, not just those
      directly involved in a specific activity.
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'function getConversationMembers(context: TurnContext)'
      parameters:
        - id: context
          type: TurnContext
          description: |
            The context object for the turn.
      return:
        type: 'Promise&lt;ChannelAccount[]&gt;'
        description: >-
          An array of [ChannelAccount](xref:botframework-schema.ChannelAccount)
          objects for

          all users currently involved in a conversation.
  - name: 'getConversations(TurnContext | string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getConversations
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      For the specified channel, asynchronously gets a page of the conversations
      in which this bot has participated.
    remarks: >-
      The the return value's
      [conversations](xref:botframework-schema.ConversationsResult.conversations)
      property contains a page of

      [ConversationMembers](xref:botframework-schema.ConversationMembers)
      objects. Each object's

      [id](xref:botframework-schema.ConversationMembers.id) is the ID of a
      conversation in which the bot has participated on this channel.

      This method can be called from outside the context of a conversation, as
      only the bot's service URL and credentials are required.


      The channel batches results in pages. If the result's

      [continuationToken](xref:botframework-schema.ConversationsResult.continuationToken)
      property is not empty, then

      there are more pages to get. Use the returned token to get the next page
      of results.

      If the `contextOrServiceUrl` parameter is a
      [TurnContext](xref:botbuilder-core.TurnContext), the URL of the channel
      server is

      retrieved from

      `contextOrServiceUrl`.[activity](xref:botbuilder-core.TurnContext.activity).[serviceUrl](xref:botframework-schema.Activity.serviceUrl).
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getConversations(contextOrServiceUrl: TurnContext | string,
        continuationToken?: string)
      parameters:
        - id: contextOrServiceUrl
          type: TurnContext | string
          description: >-
            The URL of the channel server to query or a

            [TurnContext](xref:botbuilder-core.TurnContext) object from a
            conversation on the channel.
        - id: continuationToken
          type: string
          description: >
            Optional. The continuation token from the previous page of results.

            Omit this parameter or use `undefined` to retrieve the first page of
            results.
      return:
        type: Promise&lt;ConversationsResult&gt;
        description: >-
          A [ConversationsResult](xref:botframework-schema.ConversationsResult)
          object containing a page of results

          and a continuation token.
  - name: 'getSignInLink(TurnContext, string, AppCredentials, string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getSignInLink
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously gets a sign-in link from the token server that can be sent
      as part

      of a [SigninCard](xref:botframework-schema.SigninCard).
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getSignInLink(context: TurnContext, connectionName: string,
        oAuthAppCredentials?: AppCredentials, userId?: string, finalRedirect?:
        string)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: connectionName
          type: string
          description: The name of the auth connection to use.
        - id: oAuthAppCredentials
          type: AppCredentials
          description: AppCredentials for OAuth.
        - id: userId
          type: string
          description: The user id that will be associated with the token.
        - id: finalRedirect
          type: string
          description: |
            The final URL that the OAuth flow will redirect to.
      return:
        type: Promise&lt;string&gt;
        description: ''
  - name: 'getSignInLink(TurnContext, string, CoreAppCredentials, string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getSignInLink_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getSignInLink(context: TurnContext, connectionName: string,
        oAuthAppCredentials?: CoreAppCredentials, userId?: string,
        finalRedirect?: string)
      parameters:
        - id: context
          type: TurnContext
          description: ''
        - id: connectionName
          type: string
          description: ''
        - id: oAuthAppCredentials
          type: CoreAppCredentials
          description: ''
        - id: userId
          type: string
          description: ''
        - id: finalRedirect
          type: string
          description: ''
      return:
        type: Promise&lt;string&gt;
        description: ''
  - name: 'getSignInResource(TurnContext, string, string, string, CoreAppCredentials)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getSignInResource
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously Get the raw signin resource to be sent to the user for
      signin.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getSignInResource(context: TurnContext, connectionName: string,
        userId?: string, finalRedirect?: string, appCredentials?:
        CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: connectionName
          type: string
          description: The name of the auth connection to use.
        - id: userId
          type: string
          description: The user id that will be associated with the token.
        - id: finalRedirect
          type: string
          description: |
            The final URL that the OAuth flow will redirect to.
        - id: appCredentials
          type: CoreAppCredentials
          description: ''
      return:
        type: Promise&lt;SignInUrlResponse&gt;
        description: >-
          The
          [BotSignInGetSignInResourceResponse](xref:botframework-connector.BotSignInGetSignInResourceResponse)
          object.
  - name: 'getTokenStatus(TurnContext, string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getTokenStatus
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously retrieves the token status for each configured connection
      for the given user.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getTokenStatus(context: TurnContext, userId?: string,
        includeFilter?: string)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: userId
          type: string
          description: >-
            Optional. If present, the ID of the user to retrieve the token
            status for.
                 Otherwise, the ID of the user who sent the current activity is used.
        - id: includeFilter
          type: string
          description: >-
            Optional. A comma-separated list of connection's to include. If
            present,
                 the `includeFilter` parameter limits the tokens this method returns.
      return:
        type: 'Promise&lt;TokenStatus[]&gt;'
        description: >-
          The [TokenStatus](xref:botframework-connector.TokenStatus) objects
          retrieved.
  - name: 'getTokenStatus(TurnContext, string, string, CoreAppCredentials)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getTokenStatus_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getTokenStatus(context: TurnContext, userId?: string,
        includeFilter?: string, oAuthAppCredentials?: CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: ''
        - id: userId
          type: string
          description: ''
        - id: includeFilter
          type: string
          description: ''
        - id: oAuthAppCredentials
          type: CoreAppCredentials
          description: ''
      return:
        type: 'Promise&lt;TokenStatus[]&gt;'
        description: ''
  - name: 'getUserToken(TurnContext, string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getUserToken
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously attempts to retrieve the token for a user that's in a login
      flow.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getUserToken(context: TurnContext, connectionName: string,
        magicCode?: string)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: connectionName
          type: string
          description: The name of the auth connection to use.
        - id: magicCode
          type: string
          description: Optional. The validation code the user entered.
      return:
        type: Promise&lt;TokenResponse&gt;
        description: >-
          A [TokenResponse](xref:botframework-schema.TokenResponse) object that
          contains the user token.
  - name: 'getUserToken(TurnContext, string, string, CoreAppCredentials)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.getUserToken_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function getUserToken(context: TurnContext, connectionName: string,
        magicCode?: string, oAuthAppCredentials?: CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: ''
        - id: connectionName
          type: string
          description: ''
        - id: magicCode
          type: string
          description: ''
        - id: oAuthAppCredentials
          type: CoreAppCredentials
          description: ''
      return:
        type: Promise&lt;TokenResponse&gt;
        description: ''
  - name: 'process(Request & Emitter, Response, BotLogic)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.process
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'function process(req: Request & Emitter, res: Response, logic: BotLogic)'
      parameters:
        - id: req
          type: Request & Emitter
          description: ''
        - id: res
          type: Response
          description: ''
        - id: logic
          type: BotLogic
          description: ''
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: >-
      processActivity(WebRequest, WebResponse, (context: TurnContext) =>
      Promise<any>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.processActivity
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously creates a turn context and runs the middleware pipeline for
      an incoming activity.
    remarks: >-
      This is the main way a bot receives incoming messages and defines a turn
      in the conversation. This method:


      1. Parses and authenticates an incoming request.
         - The activity is read from the body of the incoming request. An error will be returned
           if the activity can't be parsed.
         - The identity of the sender is authenticated as either the Emulator or a valid Microsoft
           server, using the bot's `appId` and `appPassword`. The request is rejected if the sender's
           identity is not verified.
      1. Creates a [TurnContext](xref:botbuilder-core.TurnContext) object for
      the received activity.
         - This object is wrapped with a [revocable proxy](https://www.ecma-international.org/ecma-262/6.0/#sec-proxy.revocable).
         - When this method completes, the proxy is revoked.
      1. Sends the turn context through the adapter's middleware pipeline.

      1. Sends the turn context to the `logic` function.
         - The bot may perform additional routing or processing at this time.
           Returning a promise (or providing an `async` handler) will cause the adapter to wait for any asynchronous operations to complete.
         - After the `logic` function completes, the promise chain set up by the middleware is resolved.

      > [!TIP]

      > If you see the error `TypeError: Cannot perform 'set' on a proxy that
      has been revoked`

      > in your bot's console output, the likely cause is that an async function
      was used

      > without using the `await` keyword. Make sure all async functions use
      await!


      Middleware can _short circuit_ a turn. When this happens, subsequent
      middleware and the

      `logic` function is not called; however, all middleware prior to this
      point still run to completion.

      For more information about the middleware pipeline, see the

      [how bots
      work](https://docs.microsoft.com/azure/bot-service/bot-builder-basics) and

      [middleware](https://docs.microsoft.com/azure/bot-service/bot-builder-concept-middleware)
      articles.

      Use the adapter's [use](xref:botbuilder-core.BotAdapter.use) method to add
      middleware to the adapter.


      For example:

      ```JavaScript

      server.post('/api/messages', (req, res) => {
         // Route received request to adapter for processing
         adapter.processActivity(req, res, async (context) => {
             // Process any messages received
             if (context.activity.type === ActivityTypes.Message) {
                 await context.sendActivity(`Hello World`);
             }
         });
      });

      ```
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function processActivity(req: WebRequest, res: WebResponse, logic:
        (context: TurnContext) => Promise<any>)
      parameters:
        - id: req
          type: WebRequest
          description: An Express or Restify style request object.
        - id: res
          type: WebResponse
          description: An Express or Restify style response object.
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;any&gt;'
          description: |
            The function to call at the end of the middleware pipeline.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: 'processActivityDirect(Activity, (context: TurnContext) => Promise<any>)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.processActivityDirect
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Asynchronously creates a turn context and runs the middleware pipeline for
      an incoming activity.
    remarks: >-
      This is the main way a bot receives incoming messages and defines a turn
      in the conversation. This method:


      1. Creates a [TurnContext](xref:botbuilder-core.TurnContext) object for
      the received activity.
         - This object is wrapped with a [revocable proxy](https://www.ecma-international.org/ecma-262/6.0/#sec-proxy.revocable).
         - When this method completes, the proxy is revoked.
      1. Sends the turn context through the adapter's middleware pipeline.

      1. Sends the turn context to the `logic` function.
         - The bot may perform additional routing or processing at this time.
           Returning a promise (or providing an `async` handler) will cause the adapter to wait for any asynchronous operations to complete.
         - After the `logic` function completes, the promise chain set up by the middleware is resolved.

      Middleware can _short circuit_ a turn. When this happens, subsequent
      middleware and the

      `logic` function is not called; however, all middleware prior to this
      point still run to completion.

      For more information about the middleware pipeline, see the

      [how bots
      work](https://docs.microsoft.com/azure/bot-service/bot-builder-basics) and

      [middleware](https://docs.microsoft.com/azure/bot-service/bot-builder-concept-middleware)
      articles.

      Use the adapter's [use](xref:botbuilder-core.BotAdapter.use) method to add
      middleware to the adapter.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function processActivityDirect(activity: Activity, logic: (context:
        TurnContext) => Promise<any>)
      parameters:
        - id: activity
          type: Activity
          description: The activity to process.
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;any&gt;'
          description: |
            The function to call at the end of the middleware pipeline.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: processRequest(IReceiveRequest)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.processRequest
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Checks the validity of the request and attempts to map it the correct
      virtual endpoint,

      then generates and returns a response if appropriate.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: 'function processRequest(request: IReceiveRequest)'
      parameters:
        - id: request
          type: IReceiveRequest
          description: A ReceiveRequest from the connected channel.
      return:
        type: Promise&lt;StreamingResponse&gt;
        description: >-
          A response created by the BotAdapter to be sent to the client that
          originated the request.
  - name: 'sendActivities(TurnContext, Partial<Activity>[])'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.sendActivities
    package: botbuilder-dialogs-adaptive-runtime
    summary: >
      Asynchronously sends a set of outgoing activities to a channel server.

      This method supports the framework and is not intended to be called
      directly for your code.

      Use the turn context's
      [sendActivity](xref:botbuilder-core.TurnContext.sendActivity) or

      [sendActivities](xref:botbuilder-core.TurnContext.sendActivities) method
      from your bot code.
    remarks: >-
      The activities will be sent one after another in the order in which
      they're received. A

      response object will be returned for each sent activity. For `message`
      activities this will

      contain the ID of the delivered message.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function sendActivities(context: TurnContext, activities:
        Partial<Activity>[])
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: activities
          type: 'Partial&lt;Activity&gt;[]'
          description: |
            The activities to send.
      return:
        type: 'Promise&lt;ResourceResponse[]&gt;'
        description: 'An array of [ResourceResponse](xref:)'
  - name: 'signOutUser(TurnContext, string, string)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.signOutUser
    package: botbuilder-dialogs-adaptive-runtime
    summary: Asynchronously signs out the user from the token server.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function signOutUser(context: TurnContext, connectionName?: string,
        userId?: string)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: connectionName
          type: string
          description: The name of the auth connection to use.
        - id: userId
          type: string
          description: The ID of user to sign out.
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: 'signOutUser(TurnContext, string, string, CoreAppCredentials)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.signOutUser_1
    package: botbuilder-dialogs-adaptive-runtime
    summary: ''
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function signOutUser(context: TurnContext, connectionName?: string,
        userId?: string, oAuthAppCredentials?: CoreAppCredentials)
      parameters:
        - id: context
          type: TurnContext
          description: ''
        - id: connectionName
          type: string
          description: ''
        - id: userId
          type: string
          description: ''
        - id: oAuthAppCredentials
          type: CoreAppCredentials
          description: ''
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: 'updateActivity(TurnContext, Partial<Activity>)'
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.updateActivity
    package: botbuilder-dialogs-adaptive-runtime
    summary: >
      Asynchronously replaces a previous activity with an updated version.

      This interface supports the framework and is not intended to be called
      directly for your code.

      Use
      [TurnContext.updateActivity](xref:botbuilder-core.TurnContext.updateActivity)
      to update

      an activity from your bot code.
    remarks: >-
      Not all channels support this operation. For channels that don't, this
      call may throw an exception.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function updateActivity(context: TurnContext, activity:
        Partial<Activity>)
      parameters:
        - id: context
          type: TurnContext
          description: The context object for the turn.
        - id: activity
          type: Partial&lt;Activity&gt;
          description: |
            The updated version of the activity to replace.
      return:
        type: Promise&lt;ResourceResponse | void&gt;
        description: ''
  - name: >-
      use((context: TurnContext, next: () => Promise<void>) => Promise<void> |
      Middleware[])
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.use
    package: botbuilder-dialogs-adaptive-runtime
    summary: Adds middleware to the adapter's pipeline.
    remarks: >-
      Middleware is added to the adapter at initialization time.

      Each turn, the adapter calls its middleware in the order in which you
      added it.
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function use(middlewares: (context: TurnContext, next: () =>
        Promise<void>) => Promise<void> | Middleware[])
      parameters:
        - id: middlewares
          type: >-
            (context: TurnContext, next: () =&gt; Promise&lt;void&gt;) =&gt;
            Promise&lt;void&gt; | Middleware[]
          description: ''
      return:
        type: this
        description: ''
  - name: >-
      useNamedPipe((context: TurnContext) => Promise<any>, string, number, () =>
      void)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.useNamedPipe
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Connects the handler to a Named Pipe server and begins listening for
      incoming requests.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function useNamedPipe(logic: (context: TurnContext) => Promise<any>,
        pipeName?: string, retryCount?: number, onListen?: () => void)
      parameters:
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;any&gt;'
          description: The logic that will handle incoming requests.
        - id: pipeName
          type: string
          description: The name of the named pipe to use when creating the server.
        - id: retryCount
          type: number
          description: Number of times to attempt to bind incoming and outgoing pipe
        - id: onListen
          type: () =&gt; void
          description: >
            Optional callback that fires once when server is listening on both
            incoming and outgoing pipe
      return:
        type: Promise&lt;void&gt;
        description: ''
  - name: >-
      useWebSocket(WebRequest, INodeSocket, INodeBuffer, (context: TurnContext)
      => Promise<any>)
    uid: botbuilder-dialogs-adaptive-runtime.CoreBotAdapter.useWebSocket
    package: botbuilder-dialogs-adaptive-runtime
    summary: >-
      Process the initial request to establish a long lived connection via a
      streaming server.
    remarks: ''
    isPreview: false
    isDeprecated: false
    syntax:
      content: >-
        function useWebSocket(req: WebRequest, socket: INodeSocket, head:
        INodeBuffer, logic: (context: TurnContext) => Promise<any>)
      parameters:
        - id: req
          type: WebRequest
          description: The connection request.
        - id: socket
          type: INodeSocket
          description: >-
            The raw socket connection between the bot (server) and
            channel/caller (client).
        - id: head
          type: INodeBuffer
          description: The first packet of the upgraded stream.
        - id: logic
          type: '(context: TurnContext) =&gt; Promise&lt;any&gt;'
          description: >
            The logic that handles incoming streaming requests for the lifetime
            of the WebSocket connection.
      return:
        type: Promise&lt;void&gt;
        description: ''
extends: BotFrameworkAdapter
